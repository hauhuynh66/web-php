<?php
    /*header('Location:./template/');
    $request = $_SERVER["REQUEST_URI"];
    var_dump($request);*/
    set_include_path("H:/Projects/PHP/assignment/");
    include_once("config/lang.php");
    require_once("model/user.php");
    require_once("model/template.php");
    require_once("model/review.php");
    require_once("controller/Controller.php");
    session_start();
    $url = isset($_SERVER['PATH_INFO'])? explode('/', ltrim($_SERVER['PATH_INFO'],'/')) : '/';
    $uri = $_SERVER["REQUEST_URI"];
    $controller = new Controller($user,$template,$review);
    if($url[0]=="/"){
        if(!isset($_SESSION["username"])){
            header("Location:/assignment/login");
        }else{
            $controller->get($url[0]);
        }
    }
    if($url[0]=="login"){
        $controller->get($url[0]);
    }
    if($url[0]=="authenticate"){
        $controller->post($url[0]);
    }
    if($url[0]=="logout"){
        $controller->get($url[0]);
    }
    if($url[0]=="users"){
        $controller->get($url[0]);
    }
    if($url[0]=="powerpoint"){
        $controller->get($url[0],$url[1]);
    }
    if($url[0]=="web"){
        $controller->get($url[0],$url[1]);
    }
    if($url[0]=="upload"&&!isset($url[1])){
        $controller->get($url[0],"index");
    }
    if($url[0]=="about"){
        $controller->get($url[0]);
    }
    if($url[0]=="profile"&&!isset($url[1])){
        $controller->get($url[0],"index");
    }
    if($url[0]=="profile"&&$url[1]=="update"){
        $controller->post($url[0],$url[1]);
    }
    if($url[0]=="profile"&&$url[1]=="get"&&isset($url[2])){
        $controller->get($url,$url[2]);
    }
    if($url[0]=="404"){
        $controller->get($url[0]);
    }
    if($url[0]=="403"){
        $controller->get($url[0]);
    }
    if($url[0]=="lang"){
        $controller->post($url[0],$url[1]);
    }
    if($url[0]=="api_call"){
        $controller->post($url[0],$url[1]);
    }
    if($url[0]=="download"){
        $controller->post($url[0],$url[1]);
    }
    if($url[0]=="web-preview"){
        $controller->get($url[0],$url[1]);
    }
    if($url[0]=="ppt-preview"){
        $controller->get($url[0],$url[1]);
    }
    if($url[0]=="review"&&$url[1]=="add"){
        $controller->get($url[0]."/".$url[1]);
    }
    if($url[0]=="template"&&$url[1]=="upload"){
        $controller->post($url[0],$url[1]);
    }
    if($url[0]=="list"){
        $controller->get($url[0],$url[1]);
    }
    if($url[0]=="template"&&$url[1]=="edit"){
        $controller->post($url,$url[2]);
    }
    if($url[0]=="template"&&$url[1]=="info"){
        $controller->get($url,$url[2]);
    }
